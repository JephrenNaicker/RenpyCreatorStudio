@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- APP DESIGN SYSTEM ---------- */
@layer components {
    /* ========== CORE COMPONENTS ========== */

    /* Card Components */
    .card {
        @apply bg-gray-900 border border-gray-700 rounded-xl p-6 transition-all;
    }

    .card-hover {
        @apply hover:shadow-lg hover:border-sky-400;
    }

    /* Tool Cards (Homepage specific) */
    .tool-card {
        @apply bg-gray-900 border border-gray-700 rounded-xl p-6 transition-all;
    }

    .tool-card-hover {
        @apply hover:shadow-lg hover:border-sky-400 hover:scale-[1.02] hover:-translate-y-1;
    }

    .panel {
        @apply bg-gray-800 rounded-lg border border-gray-700 p-6;
    }

    .panel-header {
        @apply flex justify-between items-center mb-6;
    }

    .panel-title {
        @apply text-lg font-semibold text-white;
    }

    /* Buttons */
    .btn {
        @apply px-4 py-2 rounded-lg text-sm font-medium transition-colors;
    }

    .btn-primary {
        @apply btn bg-sky-400 text-gray-900 hover:opacity-90;
    }

    .btn-secondary {
        @apply btn border border-gray-600 text-gray-300 hover:bg-gray-800;
    }

    .btn-danger {
        @apply btn border border-red-700 text-red-300 hover:bg-red-900/30;
    }

    .btn-small {
        @apply px-3 py-1.5 rounded text-xs font-medium;
    }

    /* Form Elements */
    .input {
        @apply w-full bg-gray-950 border border-gray-700 rounded-lg px-3 py-2 text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-sky-400 focus:border-transparent transition-colors;
    }

    .input-error {
        @apply border-red-500 focus:ring-red-500;
    }

    .select {
        @apply input;
    }

    textarea.input {
        @apply resize-y min-h-[100px];
    }

    .input-label {
        @apply text-sm text-gray-400 mb-1 block;
    }

    .form-group {
        @apply mb-4;
    }

    .form-row {
        @apply grid grid-cols-1 md:grid-cols-2 gap-4 mb-4;
    }

    /* Text & Headings */
    .section-title {
        @apply text-2xl font-bold text-white mb-6;
    }

    .subsection-title {
        @apply text-lg font-semibold text-white mb-4;
    }

    /* Tab Navigation */
    .tab-group {
        @apply flex gap-2 mb-6;
    }

    .tab-button {
        @apply btn-secondary text-sm px-4 py-2;
    }

    .tab-button-active {
        @apply bg-gray-700 text-white;
    }

    /* Status & Badges */
    .badge {
        @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium;
    }

    .badge-color {
        @apply w-2 h-2 rounded-full;
    }

    /* File Type Indicators */
    .file-indicator-image {
        @apply bg-blue-900/30 text-blue-400 border border-blue-700/50 px-3 py-1 rounded text-xs;
    }

    .file-indicator-audio {
        @apply bg-purple-900/30 text-purple-400 border border-purple-700/50 px-3 py-1 rounded text-xs;
    }

    .file-indicator-video {
        @apply bg-red-900/30 text-red-400 border border-red-700/50 px-3 py-1 rounded text-xs;
    }

    /* ========== ASSET LIBRARY COMPONENTS ========== */

    /* Base Asset Card */
    .asset-card {
        @apply bg-gray-900 border border-gray-700 rounded-xl p-5 transition-all hover:border-gray-600 hover:shadow-lg;
    }

    .asset-card-header {
        @apply flex items-start justify-between mb-4;
    }

    .asset-card-title {
        @apply text-lg font-semibold text-white mb-1;
    }

    .asset-card-subtitle {
        @apply text-sm text-gray-400;
    }

    .asset-card-title-input {
        @apply bg-transparent border border-transparent rounded-lg text-lg font-semibold text-white placeholder-gray-500 px-2 py-1 -mx-2 focus:outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-400/20 hover:border-gray-600 transition-all duration-200 w-full;
    }

    .asset-card-title-input:hover {
        @apply bg-gray-800/50;
    }

    /* Add this new class for the edit hint */
    .edit-hint {
        @apply absolute right-0 top-0 text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity duration-200;
    }

    .asset-card-delete-btn {
        @apply text-gray-400 hover:text-red-400 p-1 rounded-lg hover:bg-red-900/20 transition-colors;
    }

    /* Group wrapper for title input */
    .title-input-group {
        @apply relative group;
    }

    /* Expression Components */
    .expression-card {
        @apply asset-card;
    }

    .expression-preview-container {
        @apply relative aspect-square rounded-lg overflow-hidden mb-3 border border-gray-700 bg-gradient-to-br from-gray-800 to-gray-900;
    }

    .expression-preview-image {
        @apply w-full h-full object-cover;
    }

    .expression-upload-area {
        @apply absolute inset-0 flex flex-col items-center justify-center cursor-pointer transition-all hover:bg-gray-800/50;
    }

    .expression-tag {
        @apply inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-gray-800 text-gray-300;
    }

    /* Outfit Components */
    .outfit-tag-card {
        @apply asset-card flex items-center justify-between;
    }

    .outfit-tag-name {
        @apply text-white font-medium;
    }

    .outfit-badge {
        @apply bg-sky-900/30 text-sky-400 px-2 py-1 rounded text-xs font-medium;
    }

    /* Voice Line Components */
    .voice-line-card {
        @apply asset-card;
    }

    .audio-player-compact {
        @apply flex items-center gap-3 bg-gray-800 rounded-lg p-2 border border-gray-700;
    }

    .audio-player {
        @apply flex items-center gap-3 bg-gray-800 rounded-lg p-3 border border-gray-700;
    }

    .audio-play-btn {
        @apply w-10 h-10 rounded-full bg-sky-400/20 flex items-center justify-center text-sky-400 hover:bg-sky-400/30 transition-colors;
    }

    .audio-file-info {
        @apply flex-1 min-w-0;
    }

    .audio-file-name {
        @apply text-sm text-gray-300 truncate;
    }

    .audio-file-size {
        @apply text-xs text-gray-500;
    }

    /* Upload Components */
    .upload-widget {
        @apply border-2 border-dashed border-gray-700 rounded-lg p-6 text-center transition-all hover:border-sky-400/50 hover:bg-gray-800/50 cursor-pointer;
    }

    .upload-widget-simple {
        @apply border-2 border-dashed border-gray-700 rounded-xl p-4 text-center transition-all cursor-pointer hover:border-sky-400/50 hover:bg-gray-800/20;
    }

    .upload-widget-icon {
        @apply w-12 h-12 mx-auto text-gray-500 mb-3;
    }

    .upload-widget-label {
        @apply text-sm font-medium text-gray-300 mb-1;
    }

    .upload-widget-title {
        @apply text-sm font-medium text-gray-300 mb-1;
    }

    .upload-widget-hint {
        @apply text-xs text-gray-500;
    }

    .upload-area {
        @apply border-2 border-dashed border-gray-700 rounded-lg p-8 text-center transition-colors hover:border-gray-600;
    }

    /* ========== CHARACTER SPECIFIC ========== */

    .character-name-display {
        @apply text-xl font-bold text-white;
    }

    .character-nickname {
        @apply text-gray-400 text-sm;
    }

    .character-avatar {
        @apply w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold text-gray-900;
    }

    .character-color-bar {
        @apply h-2 rounded-t-lg mb-4;
    }

    .character-meta-item {
        @apply flex items-center gap-1 text-sm text-gray-400;
    }

    .color-preview {
        @apply w-10 h-10 rounded-lg border border-gray-600;
    }

    /* ========== LAYOUT COMPONENTS ========== */

    /* Project Dashboard */
    .dashboard-layout {
        @apply grid h-[calc(100vh-64px)];
        grid-template-columns: 260px 1fr;
    }

    .workspace-main {
        @apply flex flex-col h-full bg-slate-900 overflow-hidden;
    }

    .workspace-header {
        @apply px-6 pt-6;
    }

    .workspace-title {
        @apply text-white mb-4 flex items-center justify-between flex-wrap gap-4 text-xl font-bold;
    }

    .workspace-content {
        @apply flex-1 min-h-0 overflow-y-auto;
    }

    .tool-btn {
        @apply flex items-center gap-2 px-4 py-2 rounded-md text-sm text-slate-300 border border-slate-700 bg-white/10 cursor-pointer transition-all hover:bg-sky-400/20 hover:border-sky-400 hover:text-white;
    }

    .scene-badge {
        @apply bg-sky-400/20 text-sky-400 px-3 py-1 rounded-xl text-sm font-medium;
    }

    .page-header {
        @apply flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8;
    }

    .header-actions {
        @apply flex flex-col sm:flex-row gap-4;
    }

    .action-bar {
        @apply flex justify-between items-center mb-6 p-4 bg-gray-800 rounded-lg border border-gray-700;
    }

    /* Grid Layouts */
    .character-grid {
        @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6;
    }

    .asset-grid {
        @apply grid grid-cols-2 md:grid-cols-3 gap-4;
    }

    .image-grid {
        @apply grid grid-cols-4 gap-2;
    }

    /* Preview Components */
    .preview-container {
        @apply bg-gray-900 rounded-lg p-6 min-h-[300px] flex flex-col items-center justify-center;
    }

    .preview-placeholder {
        @apply w-48 h-48 bg-gray-800 rounded-lg flex items-center justify-center;
    }

    /* ========== FORM & FILTER COMPONENTS ========== */

    .filter-group {
        @apply flex items-center gap-2;
    }

    .filter-select {
        @apply select w-48;
    }

    .search-box {
        @apply relative;
    }

    .search-icon {
        @apply absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400;
    }

    .image-thumbnail {
        @apply w-full h-20 object-cover rounded border border-gray-700;
    }

    .voice-line-item {
        @apply flex items-center gap-3 p-3 bg-gray-900 rounded-lg border border-gray-700;
    }

    /* ========== EMPTY STATES ========== */

    .empty-state {
        @apply text-center py-8 border-2 border-dashed border-gray-800 rounded-lg;
    }

    .empty-icon {
        @apply text-6xl mb-4 opacity-50 text-gray-600;
    }
}

/* ---------- CUSTOM UTILITIES ---------- */

@layer utilities {

    /* Scrollbar Styling */
    .scrollbar-thin {
        scrollbar-width: thin;
    }

    .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .scrollbar-thin::-webkit-scrollbar-track {
        @apply bg-gray-800;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb {
        @apply bg-gray-600 rounded;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
        @apply bg-gray-500;
    }

    /* Animation Utilities */
    .fade-in {
        animation: fadeIn 0.2s ease-in-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    .slide-in {
        animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
        from {
            transform: translateY(10px);
            opacity: 0;
        }

        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    .animate-pulse-slow {
        animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    /* Visual Utilities */
    .grid-pattern {
        background-image:
            linear-gradient(to right, rgb(55 65 81 / 0.1) 1px, transparent 1px),
            linear-gradient(to bottom, rgb(55 65 81 / 0.1) 1px, transparent 1px);
        background-size: 20px 20px;
    }

    .gradient-text {
        @apply bg-gradient-to-r from-sky-400 to-blue-500 bg-clip-text text-transparent;
    }

    .aspect-square {
        aspect-ratio: 1 / 1;
    }

    /* Line Clamp Utilities */
    .line-clamp-1 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 1;
    }

    .line-clamp-2 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
    }

    .line-clamp-3 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 3;
    }

    .line-clamp-4 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 4;
    }

    .line-clamp-5 {
        overflow: hidden;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 5;
    }

    /* Color Picker Components */
    .color-picker-wrapper {
        @apply relative inline-block;
    }

    .color-picker-input {
        @apply absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10;
    }

    .color-display {
        @apply flex items-center gap-2 bg-gray-900 border border-gray-600 rounded-lg px-3 py-2 cursor-pointer hover:border-gray-500 transition-colors;
    }

    .color-display:focus-within {
        @apply ring-2 ring-sky-400 ring-opacity-50 border-sky-400;
    }

    .color-swatch {
        @apply w-6 h-6 rounded border border-gray-600 flex-shrink-0;
    }

    .color-hex {
        @apply text-sm text-gray-200 font-mono select-all;
    }

    .color-picker {
        @apply w-10 h-10 rounded-lg border border-gray-600 cursor-pointer;
    }

    /* Character Counter */
    .character-counter {
        @apply text-xs text-gray-500;
    }

    .character-counter-warning {
        @apply text-amber-500;
    }

    .character-counter-error {
        @apply text-red-500;
    }

    /* Image Sizing Utilities */
    .img-contain {
        @apply object-contain w-full h-full;
    }

    .img-cover {
        @apply object-cover w-full h-full;
    }

    .img-scale {
        @apply object-scale-down w-full h-full;
    }

    /* Fixed aspect ratio containers */
    .aspect-portrait {
        aspect-ratio: 3 / 4;
    }

    .aspect-landscape {
        aspect-ratio: 4 / 3;
    }

    .aspect-square {
        aspect-ratio: 1 / 1;
    }

    .aspect-video {
        aspect-ratio: 16 / 9;
    }

    .aspect-ultrawide {
        aspect-ratio: 21 / 9;
    }

    /* Image preview sizes */
    .preview-sm {
        @apply w-24 h-24;
    }

    .preview-md {
        @apply w-32 h-32;
    }

    .preview-lg {
        @apply w-40 h-40;
    }

    .preview-xl {
        @apply w-48 h-48;
    }

    .preview-full {
        @apply w-full aspect-square;
    }
}